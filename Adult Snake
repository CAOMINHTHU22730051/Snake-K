#include <iostream>
#include <windows.h>
#include <conio.h>

#define Max 100

using namespace std;

void gotoxy(int x,int y)
{
    HANDLE h = GetStdHandle(STD_OUTPUT_HANDLE);
    COORD a = {x, y};
    SetConsoleCursorPosition(h, a);
}

struct Point
{
    int x;
    int y;
};

struct Snake
{
    Point s[Max];
    int doDai;
};

void taoSnake(Snake &snake)
{
    snake.doDai = 3;
    snake.s[0].x = 3;
    snake.s[0].y = 1;
    snake.s[1].x = 2;
    snake.s[1].y = 1;
    snake.s[2].x = 1;
    snake.s[2].y = 1;
}

void hienThi(Snake snake)
{
    system("cls");
    for(int i = 0; i < snake.doDai; i++)
    {
        gotoxy(snake.s[i].x,snake.s[i].y);
        if(i == 0)
            cout << "O";
        else
            cout << "+";
    }
}

void diChuyen(Snake &snake, int huong)
{
    for(int i = snake.doDai - 1 ; i > 0; i--)
    {
        snake.s[i] = snake.s[i - 1];
    }
    if (huong == 0) snake.s[0].x = snake.s[0].x + 1;
    if (huong == 1) snake.s[0].y = snake.s[0].y + 1;
    if (huong == 2) snake.s[0].x = snake.s[0].x - 1;
    if (huong == 3) snake.s[0].y = snake.s[0].y - 1;
}

int main()
{
    Snake snake;
    taoSnake(snake);

    int huong = 1;
    char ch;

    while (true)
    {
        if (kbhit())
        {
            ch = getch();
            if (ch == 'a'&& huong != 0) huong = 2;
            if (ch == 'w'&& huong != 1) huong = 3;
            if (ch == 'd'&& huong != 2) huong = 0;
            if (ch == 's'&& huong != 3) huong = 1;
        }
        diChuyen(snake, huong);
        hienThi(snake);
        Sleep(300);
    }
    return 0;
}
